var collectorUrlRegex,collectorOptions,collectorEventId;function interceptAllClickEvents(){let a=document.getElementsByTagName("a");for(let i=0;i<a.length;i++)document.addEventListener?(a[i].addEventListener("click",interceptClickEvent),a[i].addEventListener("touchstart",interceptClickEvent),a[i].addEventListener("ontouchstart",interceptClickEvent),a[i].addEventListener("mousedown",interceptClickEvent)):document.attachEvent&&(a[i].attachEvent("onclick",interceptClickEvent),a[i].attachEvent("touchstart",interceptClickEvent),a[i].attachEvent("ontouchstart",interceptClickEvent),a[i].attachEvent("mousedown",interceptClickEvent))}function checkClickElement(element){let href=element.getAttribute("href");if(href)for(let i=0;i<collectorUrlRegex.length;i++){const matchedUrl=collectorUrlRegex[i];let domainRegex;if(new RegExp(matchedUrl).test(href)){let newHref=setUrlParameter(href,"eid",collectorEventId);element.setAttribute("href",newHref);break}if(href.includes(matchedUrl)){let newHref=setUrlParameter(href,"eid",collectorEventId);element.setAttribute("href",newHref);break}}}function interceptClickEvent(t){let e=t.target||t.srcElement;if("A"===e.tagName){let t=e.getAttribute("rt-href");t?e.setAttribute("href",t):checkClickElement(e)}else if("A"===this.tagName){let t=this.getAttribute("rt-href");t?e.setAttribute("href",t):checkClickElement(e)}}function loadCompleteCB(){window._gat&&window._gat._getTracker?collect(rt.url):window.urchinTracker?collect(rt.url):setTimeout(loadCompleteCB,500)}function setCookie(name,value,days){let expires="";if(days){let date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toUTCString()}document.cookie=name+"="+(value||"")+expires+"; path=/"}function getCookie(name){let nameEQ=name+"=",ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];for(;" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function setUrlParameter(url,key,value){let parts=url.split("#",2),anchor=parts.length>1?"#"+parts[1]:"",query=(url=parts[0]).split("?",2);if(1===query.length)return url+"?"+key+"="+value+anchor;for(let params=query[query.length-1].split("&"),i=0;i<params.length;i++)if(params[i].toLowerCase().startsWith(key.toLowerCase()+"="))return params[i]=key+"="+value,query[query.length-1]=params.join("&"),query.join("?")+anchor;return url+"&"+key+"="+value+anchor}function createImgTag(url,objectData){let n=document.createElement("img");n.width=1,n.height=1,n.src=url+(-1!==url.indexOf("?")?"&":"?")+function t(e,n){void 0===n&&(n="");let qsArr=[];for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o)){let no=o;/^\d+$/.test(o)&&(no="["+o+"].");let i=n?n+no:o,a=e[o];void 0!==a&&qsArr.push(null!==a&&"object"==typeof a?t(a,i):encodeURIComponent(i)+"="+encodeURIComponent(a))}return qsArr.join("&")}(objectData)}function collect(url,domains,options){collectorUrlRegex=domains,collectorOptions=options,collectorEventId=createUUID(),setTimeout((function(){let routyCid=getCookie("rt_c"),newClientId=!1;null==routyCid&&(routyCid=createUUID(),newClientId=!0),setCookie("rt_c",routyCid,30);let routySid=getCookie("rt_s"),newSessionId=!1;null==routySid&&(routySid=createUUID(),newSessionId=!0),setCookie("rt_s",routySid);let requestParams={eid:collectorEventId,ts:+new Date,evt:"pageView",dl:document.location.toString(),dt:document.title,ncid:newClientId,cid:routyCid,nsid:newSessionId,sid:routySid};null!=document.referrer&&(requestParams.dr=document.referrer);let analytics=[],googleAnalyticsObject=window[window.GoogleAnalyticsObject||"ga"];"function"==typeof googleAnalyticsObject&&googleAnalyticsObject.getAll&&googleAnalyticsObject.getAll().forEach((function(t){analytics.push({tid:t.get("trackingId"),cid:t.get("clientId"),s:"google"})})),null!=window.fbq&&null!=window.fbq.getState&&"function"==typeof window.fbq.getState&&window.fbq.getState().pixels.forEach((function(t){analytics.push({tid:t.id,cid:getCookie("_fbp"),fbc:getCookie("_fbc"),s:"facebook"})})),requestParams.anl=analytics,buildUrls(),null!=options&&null!=options&&options.attribute&&buildTagUrls(options.attribute),createImgTag(url,requestParams),interceptAllClickEvents()}),700)}function createUUID(){let s=[],hexDigits="0123456789abcdef",uuid;for(let i=0;i<36;i++)s[i]=hexDigits.substr(Math.floor(16*Math.random()),1);return s[14]="4",s[19]=hexDigits.substr(3&s[19]|8,1),s[8]=s[13]=s[18]=s[23]="-",s.join("")}function buildTagUrls(attribute,matchedUrls){let tags=document.querySelectorAll("["+attribute+"]");for(let i=0;i<tags.length;i++){var tag;let attrValue=tags[i].getAttribute(attribute);if(null==attrValue)continue;let matched=!1;for(let domainIndex=0;domainIndex<matchedUrls.length;domainIndex++){const matchedUrl=matchedUrls[domainIndex];let domainRegex;if(new RegExp(matchedUrl).test(attrValue)){matched=!0;break}if(attrValue.includes(matchedUrl)){matched=!0;break}}matched&&(attrValue=setUrlParameter(attrValue,"eid",collectorEventId),tags[i].setAttribute(attribute,attrValue),tags[i].setAttribute("rt-href",attrValue))}}function buildUrls(){let anchors=document.getElementsByTagName("a");for(let i=0;i<anchors.length;i++){let href=anchors[i].href,matched=!1;for(let domainIndex=0;domainIndex<collectorUrlRegex.length;domainIndex++){const matchedUrl=collectorUrlRegex[domainIndex];let domainRegex;if(new RegExp(matchedUrl).test(href)){matched=!0;break}if(href.includes(matchedUrl)){matched=!0;break}}matched&&(href=setUrlParameter(href,"eid",collectorEventId),anchors[i].setAttribute("rt-href",href))}}document.onmousedown=function(e){let evt=null==e?event:e,element=e.target||e.srcElement;if("A"!==this.tagName&&(element=element.closest("a")),null!=element)if(evt.which){let rtHref=element.getAttribute("rt-href");rtHref?element.setAttribute("href",rtHref):checkClickElement(element)}else if(evt.button){let rtHref=element.getAttribute("rt-href");rtHref?element.setAttribute("href",rtHref):checkClickElement(element)}};